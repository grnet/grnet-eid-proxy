(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{61:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return b})),n.d(t,"rightToc",(function(){return d})),n.d(t,"default",(function(){return p}));var r=n(2),a=n(6),i=(n(0),n(73)),c=["components"],o={id:"openid",title:"OpenID Connect Clients"},b={unversionedId:"openid",id:"openid",isDocsHomePage:!1,title:"OpenID Connect Clients",description:"Services can be integrated with the GRNET eID Proxy using OpenID Connect (OIDC). To allow this, the Proxy provides an OpenID Connect (OAuth2) API. Interconnection with the eID Proxy OIDC Provider allows users to sign in using any of the supported backend authentication mechanisms, including the eIDAS-Node Infrastructure. Once the user has signed in, the Proxy can return OIDC Claims containing information about the authenticated user.",source:"@site/docs/openid.md",slug:"/openid",permalink:"/grnet-eid-proxy/docs/openid",version:"current",sidebar:"someSidebar",previous:{title:"Services",permalink:"/grnet-eid-proxy/docs/services"},next:{title:"SAML Service Providers",permalink:"/grnet-eid-proxy/docs/saml_service_providers"}},d=[{value:"Endpoints",id:"endpoints",children:[]},{value:"Client registration",id:"client-registration",children:[]},{value:"User claims",id:"user-claims",children:[]}],l={rightToc:d};function p(e){var t=e.components,n=Object(a.a)(e,c);return Object(i.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Services can be integrated with the GRNET eID Proxy using OpenID Connect (OIDC). To allow this, the Proxy provides an OpenID Connect (OAuth2) API. Interconnection with the eID Proxy OIDC Provider allows users to sign in using any of the supported backend authentication mechanisms, including the eIDAS-Node Infrastructure. Once the user has signed in, the Proxy can return OIDC Claims containing information about the authenticated user."),Object(i.b)("h2",{id:"endpoints"},"Endpoints"),Object(i.b)("p",null,"The most important OIDC/OAuth2 endpoints of the GRNET eID Proxy are listed in Table 1."),Object(i.b)("p",null,"Table 1. GRNET eID Proxy OpenID Connect endpoints :"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:"center"},"Endpoint"),Object(i.b)("th",{parentName:"tr",align:"center"},"Test environment"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},"Provider configuration"),Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("inlineCode",{parentName:"td"},"https://eid-proxy-demo.aai-dev.grnet.gr/.well-known/openid-configuration"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},"Authorisation"),Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("inlineCode",{parentName:"td"},"https://eid-proxy-demo.aai-dev.grnet.gr/Saml2/OIDC/authorization"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},"Token"),Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("inlineCode",{parentName:"td"},"https://eid-proxy-demo.aai-dev.grnet.gr/OIDC/token"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},"UserInfo"),Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("inlineCode",{parentName:"td"},"https://eid-proxy-demo.aai-dev.grnet.gr/OIDC/userinfo"))))),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:"center"},"Endpoint"),Object(i.b)("th",{parentName:"tr",align:"center"},"Preproduction environment"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},"Provider configuration"),Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("inlineCode",{parentName:"td"},"https://eid-proxy.aai-dev.grnet.gr/.well-known/openid-configuration"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},"Authorisation"),Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("inlineCode",{parentName:"td"},"https://eid-proxy.aai-dev.grnet.gr/Saml2/OIDC/authorization"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},"Token"),Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("inlineCode",{parentName:"td"},"https://eid-proxy.aai-dev.grnet.gr/OIDC/token"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},"UserInfo"),Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("inlineCode",{parentName:"td"},"https://eid-proxy.aai-dev.grnet.gr/OIDC/userinfo"))))),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:"center"},"Endpoint"),Object(i.b)("th",{parentName:"tr",align:"center"},"Production environment"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},"Provider configuration"),Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("inlineCode",{parentName:"td"},"https://eid-proxy.aai.grnet.gr/.well-known/openid-configuration"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},"Authorisation"),Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("inlineCode",{parentName:"td"},"https://eid-proxy.aai.grnet.gr/Saml2/OIDC/authorization"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},"Token"),Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("inlineCode",{parentName:"td"},"https://eid-proxy.aai.grnet.gr/OIDC/token"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},"UserInfo"),Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("inlineCode",{parentName:"td"},"https://eid-proxy.aai.grnet.gr/OIDC/userinfo"))))),Object(i.b)("h2",{id:"client-registration"},"Client registration"),Object(i.b)("p",null,"Before a service can use the eID Proxy OIDC Provider for user login, it must register a client and obtain OAuth 2.0 client credentials. OAuth2 credentials typically include a client ID and client secret.\nIt is also necessary to specify one or more Redirection URI(s) to indicate where the eID Proxy OIDC Provider will send responses to the authentication requests. Note that the Redirection URI(s) MUST use the https scheme."),Object(i.b)("h2",{id:"user-claims"},"User claims"),Object(i.b)("p",null,"The GRNET eID Proxy UserInfo Endpoint is an OAuth 2.0 Protected Resource that returns specific information about the authenticated End-User as Claim values.\nTo obtain the requested Claims about the End-User, the Client makes a request to the UserInfo Endpoint using an Access Token obtained through OpenID Connect Authentication.\nThe scopes associated with the Access Token used to access the UserInfo Endpoint will determine what Claims will be released.\nThese Claims are represented by a JSON object that contains a collection of name and value pairs for the Claims.\nTable 2 lists the Claims that can be returned from the GRNET eID Proxy OpenID Connect UserInfo endpoint."),Object(i.b)("p",null,"Table 2. GRNET eID Proxy OpenID Connect Claims"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:"center"}),Object(i.b)("th",{parentName:"tr",align:"center"}),Object(i.b)("th",{parentName:"tr",align:"center"},"Friendly name"),Object(i.b)("th",{parentName:"tr",align:"center"}),Object(i.b)("th",{parentName:"tr",align:"center"}))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"}),Object(i.b)("td",{parentName:"tr",align:"center"}),Object(i.b)("td",{parentName:"tr",align:"center"},"Current First Name(s)"),Object(i.b)("td",{parentName:"tr",align:"center"},"FirstName"),Object(i.b)("td",{parentName:"tr",align:"center"},"given_name")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"}),Object(i.b)("td",{parentName:"tr",align:"center"}),Object(i.b)("td",{parentName:"tr",align:"center"},"Current Family Name(s)"),Object(i.b)("td",{parentName:"tr",align:"center"},"FamilyName"),Object(i.b)("td",{parentName:"tr",align:"center"},"family_name")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("strong",{parentName:"td"},"Natural Person")),Object(i.b)("td",{parentName:"tr",align:"center"},"profile"),Object(i.b)("td",{parentName:"tr",align:"center"},"Date of Birth includes a date using the following format: ",Object(i.b)("inlineCode",{parentName:"td"},'YYYY + "-" + MM + "-" + DD')),Object(i.b)("td",{parentName:"tr",align:"center"},"DateOfBirth"),Object(i.b)("td",{parentName:"tr",align:"center"},"birthdate")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"}),Object(i.b)("td",{parentName:"tr",align:"center"}),Object(i.b)("td",{parentName:"tr",align:"center"},"A unique person identifier"),Object(i.b)("td",{parentName:"tr",align:"center"},"PersonIdentifier"),Object(i.b)("td",{parentName:"tr",align:"center"},"person_identifier")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"}),Object(i.b)("td",{parentName:"tr",align:"center"},"legal_profile"),Object(i.b)("td",{parentName:"tr",align:"center"},"The legal name for the legal person authenticating"),Object(i.b)("td",{parentName:"tr",align:"center"},"LegalName"),Object(i.b)("td",{parentName:"tr",align:"center"},"legal_name")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"}),Object(i.b)("td",{parentName:"tr",align:"center"}),Object(i.b)("td",{parentName:"tr",align:"center"},"A unique identifier for the legal person identity"),Object(i.b)("td",{parentName:"tr",align:"center"},"LegalPersonIdentifier"),Object(i.b)("td",{parentName:"tr",align:"center"},"legal_person_identifier")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"},Object(i.b)("strong",{parentName:"td"},"Legal Person")),Object(i.b)("td",{parentName:"tr",align:"center"},"legal_address"),Object(i.b)("td",{parentName:"tr",align:"center"},"The address the legal person has registered with the MS authority or operating address if not registered. For a company this should be the registered address within the MS issuing the eID."),Object(i.b)("td",{parentName:"tr",align:"center"},"LegalAddress"),Object(i.b)("td",{parentName:"tr",align:"center"},"legal_address")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:"center"}),Object(i.b)("td",{parentName:"tr",align:"center"},"vat_registration"),Object(i.b)("td",{parentName:"tr",align:"center"},"The VAT registration number for the organisation"),Object(i.b)("td",{parentName:"tr",align:"center"},"VATRegistration"),Object(i.b)("td",{parentName:"tr",align:"center"},"vat_registration")))),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"Note that when needed, the GRNET eID Proxy will request High LoA for service. Then the service can use the requester_acr_mapping mechanism of the Service Provider plugin described in Section  ",Object(i.b)("strong",{parentName:"p"},"????")))))}p.isMDXComponent=!0},73:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return O}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=a.a.createContext({}),l=function(e){var t=a.a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return a.a.createElement(d.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,d=b(e,["components","mdxType","originalType","parentName"]),p=l(n),m=r,O=p["".concat(c,".").concat(m)]||p[m]||s[m]||i;return n?a.a.createElement(O,o(o({ref:t},d),{},{components:n})):a.a.createElement(O,o({ref:t},d))}));function O(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,c=new Array(i);c[0]=m;var o={};for(var b in t)hasOwnProperty.call(t,b)&&(o[b]=t[b]);o.originalType=e,o.mdxType="string"==typeof e?e:r,c[1]=o;for(var d=2;d<i;d++)c[d]=n[d];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);